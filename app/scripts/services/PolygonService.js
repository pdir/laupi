'use strict';

/**
 * @ngdoc service
 * @name naturtripApp.PolygonService
 * @description
 * # PolygonService
 * Service in the naturtripApp.
 */
angular.module('route360DemoApp')
    .service('PolygonService', function PolygonService() {
        
        /**
          * This methods checks if a given point is contained in a given polygon. 
          *
          * @method pointInPolygon
          * 
          * @param {Array} [point] The point to check [lat, lon]
          *Â @return {boolean} returns true if the point is contained in the polygon
          */ 
        this.pointInPolygon = function(point){

            var x = point[0], y = point[1];
    
            var inside = false;
            for (var i = 0, j = brandenburg.length - 1; i < brandenburg.length; j = i++) {
                var xi = brandenburg[i][0], yi = brandenburg[i][1];
                var xj = brandenburg[j][0], yj = brandenburg[j][1];
                
                var intersect = ((yi > y) != (yj > y))
                    && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);
                if (intersect) inside = !inside;
            }
            
            return inside;
        };

        var brandenburg = [
           [53.35626, 14.41545],
           [53.34259, 14.42177],
           [53.30853, 14.42438],
           [53.28224, 14.43556],
           [53.27896, 14.45028],
           [53.26018, 14.45852],
           [53.25950, 14.45867],
           [53.21890, 14.41916],
           [53.20919, 14.41332],
           [53.20568, 14.40992],
           [53.19557, 14.38822],
           [53.16430, 14.38151],
           [53.14588, 14.39742],
           [53.14562, 14.39749],
           [53.04827, 14.35989],
           [53.03146, 14.32616],
           [52.98549, 14.22813],
           [52.97135, 14.17930],
           [52.95518, 14.15209],
           [52.94373, 14.15917],
           [52.93272, 14.15730],
           [52.90097, 14.17021],
           [52.88214, 14.17420],
           [52.86883, 14.16930],
           [52.85209, 14.14617],
           [52.84332, 14.13270],
           [52.83296, 14.14575],
           [52.83086, 14.16212],
           [52.83033, 14.16317],
           [52.82722, 14.19051],
           [52.82373, 14.21769],
           [52.76656, 14.31225],
           [52.75281, 14.36309],
           [52.68275, 14.44839],
           [52.67235, 14.46853],
           [52.65942, 14.47787],
           [52.63904, 14.54210],
           [52.60747, 14.61005],
           [52.57506, 14.64806],
           [52.56837, 14.65434],
           [52.52690, 14.62299],
           [52.52054, 14.61805],
           [52.52049, 14.61815],
           [52.51933, 14.61727],
           [52.49693, 14.65200],
           [52.43059, 14.58605],
           [52.42273, 14.55463],
           [52.41025, 14.55299],
           [52.40951, 14.55144],
           [52.40699, 14.55257],
           [52.39495, 14.55099],
           [52.34623, 14.57981],
           [52.30829, 14.59682],
           [52.28483, 14.60039],
           [52.27555, 14.64619],
           [52.26275, 14.70427],
           [52.22906, 14.72857],
           [52.10710, 14.70984],
           [52.09762, 14.74099],
           [52.06171, 14.77307],
           [52.05944, 14.77481],
           [52.00424, 14.72869],
           [51.99795, 14.72844],
           [51.99750, 14.72809],
           [51.95713, 14.72681],
           [51.91376, 14.72507],
           [51.83235, 14.60713],
           [51.83035, 14.61182],
           [51.82766, 14.60812],
           [51.80085, 14.65952],
           [51.74483, 14.67236],
           [51.73953, 14.68006],
           [51.73411, 14.68176],
           [51.69769, 14.74087],
           [51.68793, 14.75505],
           [51.61530, 14.77871],
           [51.61427, 14.77770],
           [51.58065, 14.74431],
           [51.57814, 14.70138],
           [51.54666, 14.67680],
           [51.53708, 14.60047],
           [51.55990, 14.57992],
           [51.54210, 14.52708],
           [51.53069, 14.45223],
           [51.51288, 14.36783],
           [51.49552, 14.36013],
           [51.49552, 14.32343],
           [51.51060, 14.32196],
           [51.53297, 14.17189],
           [51.51311, 14.16491],
           [51.51356, 14.13446],
           [51.47313, 14.11960],
           [51.36810, 14.02236],
           [51.37199, 13.97466],
           [51.38940, 13.97392],
           [51.37153, 13.92108],
           [51.35252, 13.77577],
           [51.36237, 13.54919],
           [51.42808, 13.42957],
           [51.37520, 13.28609],
           [51.38768, 13.22353],
           [51.42773, 13.17436],
           [51.54040, 13.17820],
           [51.59534, 13.07596],
           [51.65302, 13.02394],
           [51.71829, 13.14162],
           [51.85316, 13.10569],
           [51.86272, 13.02518],
           [51.98572, 12.66842],
           [51.96741, 12.62506],
           [51.97198, 12.50800],
           [52.02918, 12.33086],
           [52.16730, 12.16859],
           [52.34398, 12.25778],
           [52.42790, 12.25034],
           [52.46263, 12.28131],
           [52.50488, 12.10789],
           [52.64039, 12.14133],
           [52.65354, 12.19088],
           [52.72562, 12.15124],
           [52.81032, 12.19584],
           [52.84325, 12.17850],
           [52.82753, 12.09426],
           [52.85971, 12.06453],
           [52.85522, 11.96667],
           [52.90008, 11.77590],
           [52.93145, 11.77900],
           [53.04107, 11.43711],
           [53.01350, 11.33677],
           [53.09466, 11.22404],
           [53.15041, 11.25006],
           [53.16304, 11.50772],
           [53.22909, 11.50524],
           [53.27282, 11.70096],
           [53.25503, 11.75547],
           [53.32612, 11.97348],
           [53.38859, 12.01065],
           [53.37972, 12.24972],
           [53.28578, 12.51110],
           [53.27319, 12.69939],
           [53.23205, 12.80220],
           [53.21500, 13.01279],
           [53.26170, 13.08835],
           [53.32168, 13.44759],
           [53.41850, 13.50952],
           [53.52541, 13.72259],
           [53.57840, 13.75851],
           [53.57546, 13.82788],
           [53.51731, 13.90964],
           [53.46056, 13.94680],
           [53.44876, 14.07191],
           [53.46498, 14.11899],
           [53.45392, 14.24782],
           [53.37640, 14.26144],
           [53.29059, 14.14624],
           [53.28689, 14.23791],
           [53.33056, 14.29860],
           [53.35626, 14.41545]   
        ];
    });
